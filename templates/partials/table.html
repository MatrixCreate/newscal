{% set sources = load_data(path="content/events/sources.json") %}

<!-- Filters -->
<h2 class="text-lg font-bold mb-4">Filters</h2>
<div class="flex gap-4 flex-wrap">
  <div class="sm:w-1/2 xl:w-1/3">
    <div class="collapse bg-base-200 ">
      <input type="checkbox" />
      <div class="collapse-title text-lg font-medium">
        <div>Sources </div>
      </div>
      <div class="collapse-content js-sources max-h-[200px] overflow-x-scroll">
        <div class="flex gap-2 flex-col md:flex-row">
          <input type="text" placeholder="Search..." class="js-search input input-bordered w-full max-w-xs" />
          <button class="btn btn-success js-all-sources">Select All</button>
          <button class="btn btn-warning js-no-sources">Select None</button>
        </div>

        {% for source in sources %}
        {% set name = source %}
        {% set isChecked = name == "NHS" or name == "ONS" %}
          <div class="js-sources">
            <div class="form-control">
              <label class="label cursor-pointer">
                <span class="label-text">{{ source }}</span>
                <input value="{{ source }}"
                      type="checkbox"
                      {% if isChecked -%}
                      checked="checked"
                      {%- endif %}
                      class="checkbox js-source" />
              </label>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

  </div>

  <div class="sm:w-1/2 xl:w-1/3">
    <div class="collapse bg-base-200 ">
      <input type="checkbox" />
      <div class="collapse-title text-lg font-medium">Options</div>
      <div class="collapse-content">
        <div class="form-control">
          <label class="label cursor-pointer">
            <span class="label-text">Show Past Events</span>
            <input value="past-events"
                  type="checkbox"
                  class="checkbox js-past-events" />
          </label>
        </div>
        <div class="form-control">
          <label class="label cursor-pointer">
            <span class="label-text">Hide Future Events</span>
            <input value="past-events"
                  type="checkbox"
                  class="checkbox js-future-events" />
          </label>
        </div>
      </div>
    </div>

  </div>
</div>

<table id="eventsTable" class="display" data-order='[[ 4, "asc" ]]'>
  <thead>
    <tr>
      <th>Title</th>
      <th>Additional Details</th>
      <th>Source</th>
      <th>Date</th>
      <th>Time</th>
    </tr>
  </thead>

  <tbody>
    {% set events = load_data(path="content/events/events.json") %}

    {% for event in events %}
      <tr>
        <td><a href="{{ event.url }}">{{ event.title }}</a></td>
        <td>{% if event.description %}{{ event.description }}{% endif %}</td>
        <td>{{ event.source }}</td>
        <td>{{ event.date }} </td>
        <td>
          {%- if event.time and not event.allDay -%}
            {{- event.time -}}
          {%- else -%}
            N/A
          {%- endif -%}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
