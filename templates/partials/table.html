{% set sources = get_taxonomy(kind="source") %}

<!-- Filters -->
<div>

  <div class="collapse bg-base-200 sm:w-1/2 xl:w-1/3">
    <input type="checkbox" />
    <div class="collapse-title text-lg font-medium">Filter Sources</div>
    <div class="collapse-content">
      {% for source in sources.items %}
      <div class="form-control">
        <label class="label cursor-pointer">
          <span class="label-text">{{ source.name }}</span>
          <input value="{{ source.name }}"
                 type="checkbox"
                 checked="checked"
                 class="checkbox js-source" />
        </label>
      </div>
      {% endfor %}
    </div>
  </div>

</div>

<table id="eventsTable" class="display" data-order='[[ 4, "asc" ]]'>
  <thead>
    <tr>
      <th>Title</th>
      <th>Source</th>
      <th>Date</th>
    </tr>
  </thead>

  <tbody>
    {% set events = get_section(path="events/_index.md") %}

    {% for page in events.pages %}
      {% set monthDisplay = page.extra.date.month %}
      {% set dayDisplay = page.extra.date.day %}
      {% if (page.extra.date.month~"" | length == 1) %}
        {% set monthDisplay = "0"~page.extra.date.month%}
      {% endif %}
      {% if page.extra.date.day~"" | length == 1 %}
        {% set dayDisplay = "0"~page.extra.date.day%}
      {% endif %}

      <tr>
        <td><a href="{{ page.extra.url }}">{{ page.title }}</a></td>
        <td>{{ page.taxonomies.source | join(sep=", ") }}</td>
        <td>{{ page.extra.date.year }}-{{ monthDisplay }}-{{ dayDisplay }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
